# 一、XSS

## 1、概述
Cross-Site Scripting（跨站脚本攻击）简称 XSS，是一种代码注入攻击。攻击者通过给目标网站注入脚本，诱导用户点击，使得脚本最终在用户的浏览器上执行。为了和 CSS区分，改名为 XSS。

利用注入的脚本，能干的坏事有：

- 注入脚本获取信息
- 窃取用户Cookie，为接下来的CSRF做准备
- 绕过网页过滤进行攻击
- 劫持流量，实现恶意跳转


## 2、XSS 分类
### 2.1、 存储型 XSS（持久型XSS）

攻击步骤：

1. 恶意代码被攻击者提交到目标网站上，最终存储在目标网站的数据库中。
2. 用户打开网站后，网站服务器从数据库中返回拼接在 HTML 中的恶意代码，被用户执行。
3. 最终导致，恶意代码窃取用户数据发送给攻击者或者在当前浏览器上，利用用户数据，直接冒充用户行为，调用目标网站接口完成攻击者的指定操作。


### 2.2 反射型 XSS（非持久型XSS）

攻击步骤：

1. 攻击者构造含有恶意代码的 URL，诱导用户点击
2. 用户点击 URL 后，向服务器发起请求，服务器将恶意代码从URL中取出，拼接在 HTML里返回给浏览器
3. 用户浏览器接收到响应后，直接执行恶意代码
4. 会导致的后果同上
5. 
### 2.3 DOM型 XSS

攻击步骤：

1. 类似反射型 XSS。攻击者构造含有恶意代码的 URL，诱导用户点击
2. 用户点击后，此时没有向服务器发起请求，而是被前端的 Javascript 直接取出 URL 中的恶意代码并执行会导致的后果同上

## 3、防范
1. HTML 转义
2. CSP
3. 过滤能够注入脚本的标签，如 < script>、< img>、< a>等
4. 为防止 Cookie 盗用，在 http 响应头部设置 HttpOnly
5. 验证码
6. 输入内容长度控制，增加 XSS 攻击难度


